# 帖子管理测试文档

## 测试概述

本测试套件全面覆盖社区帖子管理功能，包括帖子的创建、编辑、删除、富文本编辑、图片上传、分类标签管理和搜索功能。

## 测试覆盖范围

### 1. 帖子发布测试
- ✅ 基本帖子发布功能
- ✅ 草稿保存和发布
- ✅ 帖子内容验证
- ✅ 发布状态管理

### 2. 富文本编辑器测试
- ✅ 基本文本格式化（粗体、斜体、下划线）
- ✅ 链接插入和编辑
- ✅ 列表和代码块插入
- ✅ 表格插入和编辑
- ✅ 引用和分割线插入
- ✅ 格式化内容保存和显示

### 3. 图片上传测试
- ✅ 单张图片上传
- ✅ 多张图片上传
- ✅ 图片格式验证
- ✅ 图片大小限制
- ✅ 上传进度显示
- ✅ 上传错误处理

### 4. 帖子编辑测试
- ✅ 已发布帖子编辑
- ✅ 富文本内容编辑
- ✅ 编辑历史记录
- ✅ 编辑权限验证

### 5. 帖子删除测试
- ✅ 单个帖子删除
- ✅ 删除确认对话框
- ✅ 批量删除功能
- ✅ 删除权限验证

### 6. 分类和标签管理
- ✅ 帖子分类创建和选择
- ✅ 分类筛选功能
- ✅ 标签添加和管理
- ✅ 标签筛选功能
- ✅ 标签数量和长度限制
- ✅ 批量分类修改

### 7. 搜索功能测试
- ✅ 标题关键词搜索
- ✅ 内容全文搜索
- ✅ 模糊搜索功能
- ✅ 组合搜索和筛选
- ✅ 搜索结果统计
- ✅ 空搜索结果处理

### 8. 排序功能测试
- ✅ 按时间排序（最新/最早）
- ✅ 按热度排序（点赞/评论数）
- ✅ 按相关性排序
- ✅ 自定义排序规则

### 9. 帖子模板功能
- ✅ 预设模板使用
- ✅ 自定义模板创建
- ✅ 模板管理和编辑
- ✅ 模板分享功能

### 10. 高级功能测试
- ✅ 批量操作（删除、分类修改）
- ✅ 帖子导入导出
- ✅ 定时发布功能
- ✅ 帖子统计分析

## 测试数据管理

### 测试用户
- 普通用户：用于基本帖子操作
- 管理员用户：用于管理功能测试
- 多个测试用户：用于权限和交互测试

### 测试帖子
- 不同分类的帖子
- 包含各种富文本格式的帖子
- 带图片的帖子
- 不同标签组合的帖子

### 测试图片
- 有效格式图片（JPG、PNG、GIF）
- 无效格式文件
- 不同大小的图片文件
- 批量上传测试图片

## 运行测试

### 单独运行帖子管理测试
```bash
node frontend/e2e/run-post-management-tests.cjs
```

### 运行特定测试组
```bash
# 只运行富文本编辑器测试
npx playwright test --grep "富文本编辑器测试"

# 只运行图片上传测试
npx playwright test --grep "图片上传测试"

# 只运行搜索功能测试
npx playwright test --grep "搜索功能测试"
```

## 测试环境要求

### 前置条件
- 用户已注册并登录
- 社区功能已启用
- 图片上传服务正常
- 富文本编辑器组件已加载

### 数据清理
- 每个测试用例后自动清理创建的帖子
- 清理上传的测试图片
- 重置用户状态和权限

## 已知问题和限制

### 当前限制
- 富文本编辑器的某些高级功能可能需要特定浏览器支持
- 大文件上传测试可能受网络环境影响
- 批量操作测试需要足够的测试数据

### 待改进项
- 添加更多边界条件测试
- 增加性能测试用例
- 完善错误恢复测试
- 添加可访问性测试

## 测试报告

测试完成后会生成详细的HTML报告，包括：
- 测试用例执行结果
- 失败用例的截图和错误信息
- 测试覆盖率统计
- 性能指标分析

报告位置：`frontend/playwright-report/index.html`