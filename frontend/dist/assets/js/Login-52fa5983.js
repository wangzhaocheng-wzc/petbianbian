import{u as e,a as r,j as s,P as t}from"./index-379b094b.js";import{r as a}from"./react-vendor-7927b0b6.js";import{u as l}from"./index.esm-04d114ed.js";import{b as i,u as m,L as d}from"./router-2b5ad94b.js";import{d as o,e as n,f as c,E as u,g as p}from"./ui-vendor-f43192ea.js";import"./utils-2ce30174.js";function h(){var t,h;const[f,x]=a.useState(!1),[y,b]=a.useState(!1),[g,v]=a.useState(""),{login:N}=e(),w=i(),j=(null==(h=null==(t=m().state)?void 0:t.from)?void 0:h.pathname)||"/",{register:S,handleSubmit:k,formState:{errors:A},setError:q}=l();return r("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s("div",{className:"max-w-md w-full space-y-8",children:[s("div",{children:[r("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-primary-100",children:r(o,{className:"h-6 w-6 text-primary-600"})}),r("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"登录您的账户"}),s("p",{className:"mt-2 text-center text-sm text-gray-600",children:["还没有账户？"," ",r(d,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"立即注册"})]})]}),s("form",{className:"mt-8 space-y-6",onSubmit:k(async e=>{b(!0),v("");try{const r=await N(e);r.success?w(j,{replace:!0}):r.errors?r.errors.forEach(e=>{q(e.field,{type:"server",message:e.message})}):v(r.message)}catch(r){v("登录过程中发生错误，请稍后重试")}finally{b(!1)}}),children:[g&&r("div",{className:"rounded-md bg-red-50 p-4",children:r("div",{className:"text-sm text-red-700",children:g})}),s("div",{className:"space-y-4",children:[s("div",{children:[r("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"邮箱地址"}),s("div",{className:"mt-1 relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r(n,{className:"h-5 w-5 text-gray-400"})}),r("input",{...S("email",{required:"请输入邮箱地址",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"请输入有效的邮箱地址"}}),type:"email",autoComplete:"email",className:"block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(A.email?"border-red-300":"border-gray-300"),placeholder:"请输入邮箱地址"})]}),A.email&&r("p",{className:"mt-1 text-sm text-red-600",children:A.email.message})]}),s("div",{children:[r("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"密码"}),s("div",{className:"mt-1 relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r(c,{className:"h-5 w-5 text-gray-400"})}),r("input",{...S("password",{required:"请输入密码",minLength:{value:6,message:"密码至少需要6个字符"}}),type:f?"text":"password",autoComplete:"current-password",className:"block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(A.password?"border-red-300":"border-gray-300"),placeholder:"请输入密码"}),r("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!f),children:r(f?u:p,{className:"h-5 w-5 text-gray-400"})})]}),A.password&&r("p",{className:"mt-1 text-sm text-red-600",children:A.password.message})]})]}),r("div",{className:"flex items-center justify-between",children:r("div",{className:"text-sm",children:r(d,{to:"/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"忘记密码？"})})}),r("div",{children:r("button",{type:"submit",disabled:y,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?s("div",{className:"flex items-center",children:[r("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"登录中..."]}):"登录"})})]})]})})}function f(){return r(t,{requireAuth:!1,children:r(h,{})})}export{f as default};
