import{u as e,a as r,j as s,P as t}from"./index-379b094b.js";import{r as a}from"./react-vendor-7927b0b6.js";import{u as l}from"./index.esm-04d114ed.js";import{b as m,L as i}from"./router-2b5ad94b.js";import{h as o,b as d,e as n,f as c,E as p,g as u}from"./ui-vendor-f43192ea.js";import"./utils-2ce30174.js";function h(){const[t,h]=a.useState(!1),[x,y]=a.useState(!1),[f,b]=a.useState(!1),[g,v]=a.useState(""),{register:N}=e(),w=m(),{register:j,handleSubmit:k,formState:{errors:S},watch:A,setError:C}=l(),P=A("password");return r("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s("div",{className:"max-w-md w-full space-y-8",children:[s("div",{children:[r("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-primary-100",children:r(o,{className:"h-6 w-6 text-primary-600"})}),r("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"创建新账户"}),s("p",{className:"mt-2 text-center text-sm text-gray-600",children:["已有账户？"," ",r(i,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"立即登录"})]})]}),s("form",{className:"mt-8 space-y-6",onSubmit:k(async e=>{b(!0),v("");try{const r=await N(e);r.success?w("/",{replace:!0}):r.errors?r.errors.forEach(e=>{C(e.field,{type:"server",message:e.message})}):v(r.message)}catch(r){v("注册过程中发生错误，请稍后重试")}finally{b(!1)}}),children:[g&&r("div",{className:"rounded-md bg-red-50 p-4",children:r("div",{className:"text-sm text-red-700",children:g})}),s("div",{className:"space-y-4",children:[s("div",{children:[r("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"用户名"}),s("div",{className:"mt-1 relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r(d,{className:"h-5 w-5 text-gray-400"})}),r("input",{...j("username",{required:"请输入用户名",minLength:{value:3,message:"用户名至少需要3个字符"},maxLength:{value:20,message:"用户名不能超过20个字符"},pattern:{value:/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,message:"用户名只能包含字母、数字、下划线和中文"}}),type:"text",autoComplete:"username",className:"block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(S.username?"border-red-300":"border-gray-300"),placeholder:"请输入用户名"})]}),S.username&&r("p",{className:"mt-1 text-sm text-red-600",children:S.username.message})]}),s("div",{children:[r("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"邮箱地址"}),s("div",{className:"mt-1 relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r(n,{className:"h-5 w-5 text-gray-400"})}),r("input",{...j("email",{required:"请输入邮箱地址",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"请输入有效的邮箱地址"}}),type:"email",autoComplete:"email",className:"block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(S.email?"border-red-300":"border-gray-300"),placeholder:"请输入邮箱地址"})]}),S.email&&r("p",{className:"mt-1 text-sm text-red-600",children:S.email.message})]}),s("div",{children:[r("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"密码"}),s("div",{className:"mt-1 relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r(c,{className:"h-5 w-5 text-gray-400"})}),r("input",{...j("password",{required:"请输入密码",minLength:{value:6,message:"密码至少需要6个字符"},pattern:{value:/^(?=.*[a-zA-Z])(?=.*\d)/,message:"密码必须包含至少一个字母和一个数字"}}),type:t?"text":"password",autoComplete:"new-password",className:"block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(S.password?"border-red-300":"border-gray-300"),placeholder:"请输入密码"}),r("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>h(!t),children:r(t?p:u,{className:"h-5 w-5 text-gray-400"})})]}),S.password&&r("p",{className:"mt-1 text-sm text-red-600",children:S.password.message})]}),s("div",{children:[r("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"确认密码"}),s("div",{className:"mt-1 relative",children:[r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r(c,{className:"h-5 w-5 text-gray-400"})}),r("input",{...j("confirmPassword",{required:"请确认密码",validate:e=>e===P||"两次输入的密码不一致"}),type:x?"text":"password",autoComplete:"new-password",className:"block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(S.confirmPassword?"border-red-300":"border-gray-300"),placeholder:"请再次输入密码"}),r("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!x),children:r(x?p:u,{className:"h-5 w-5 text-gray-400"})})]}),S.confirmPassword&&r("p",{className:"mt-1 text-sm text-red-600",children:S.confirmPassword.message})]})]}),r("div",{children:r("button",{type:"submit",disabled:f,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:f?s("div",{className:"flex items-center",children:[r("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"注册中..."]}):"创建账户"})}),s("div",{className:"text-xs text-gray-500 text-center",children:['点击"创建账户"即表示您同意我们的'," ",r(i,{to:"/terms",className:"text-primary-600 hover:text-primary-500",children:"服务条款"})," ","和"," ",r(i,{to:"/privacy",className:"text-primary-600 hover:text-primary-500",children:"隐私政策"})]})]})]})})}function x(){return r(t,{requireAuth:!1,children:r(h,{})})}export{x as default};
